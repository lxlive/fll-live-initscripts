#!/bin/bash

# XKBMODEL="linux"
# XKBLAYOUT="de"
# XKBVARIANT="nodeadkeys"
. /etc/default/keyboard

# LANG=de_DE.utf8
. /etc/default/locale



case $LANG in
    de_DE.utf8)
        sed -e "s/@LAYOUTS@/'de','us'/" \
            /usr/share/fll-live-initscripts/90_keyboardlayouts.gschema.override  \
            > /usr/share/glib-2.0/schemas/90_keyboardlayouts.gschema.override
        ;;
    en_US.utf8)
        sed -e "s/@LAYOUTS@/'us','de'/" \
            /usr/share/fll-live-initscripts/90_keyboardlayouts.gschema.override  \
            > /usr/share/glib-2.0/schemas/90_keyboardlayouts.gschema.override
        ;;
    *)
        XLANG=${LANG:0:2}
        sed -e "s/@LAYOUTS@/'${XLANG}','us'/" \
           /usr/share/fll-live-initscripts/90_keyboardlayouts.gschema.override  \
           > /usr/share/glib-2.0/schemas/90_keyboardlayouts.gschema.override

        ;;
esac

glib-compile-schemas /usr/share/glib-2.0/schemas/
